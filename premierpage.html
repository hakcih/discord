<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Entrée pseudo — Turko</title>
<style>
  :root{
    --bg:#071029; --card:rgba(255,255,255,0.03); --accent:#00c6ff; --accent2:#ffd27a;
    --text:#eaf4ff; --morse-bg:rgba(255,210,122,0.08); --morse-border:rgba(255,210,122,0.22);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#0b2546);color:var(--text);display:flex;align-items:center;justify-content:center}
  .card{
    width:min(720px,94vw); padding:28px; border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04); box-shadow:0 20px 60px rgba(0,0,0,0.6);
  }
  h1{font-size:1.2rem;margin-bottom:8px;color:#bfe6ff}
  p.lead{color:rgba(255,255,255,0.8);margin-bottom:18px;line-height:1.4}
  form{display:flex;gap:8px;align-items:center}
  input[type="text"]{flex:1;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.18);color:var(--text);font-size:1rem}
  button{padding:10px 14px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),#0072ff);color:#001;font-weight:700;cursor:pointer}
  .secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#bfe6ff}
  .msg{margin-top:14px;font-size:0.95rem;color:#ffd27a}
  .hint{margin-top:10px;color:rgba(255,255,255,0.65);font-size:0.9rem}
  .fallback{margin-top:12px;color:#bfe6ff}
  a.fallback-link{color:var(--accent2);font-weight:800;text-decoration:none}

  /* MORSE HIGHLIGHT */
  .morse {
    display:inline-block;
    padding:10px 12px;
    border-radius:10px;
    background:var(--morse-bg);
    border:1px solid var(--morse-border);
    color:var(--accent2);
    font-family:monospace;
    letter-spacing:6px;
    cursor:pointer;
    user-select:text;
    transition:transform .12s ease, box-shadow .12s ease;
    box-shadow:0 6px 18px rgba(0,0,0,0.35);
  }
  .morse:focus, .morse:hover {
    transform:translateY(-3px);
    box-shadow:0 12px 30px rgba(0,0,0,0.45);
  }

  /* Modal */
  .modal-backdrop{
    position:fixed; inset:0; background:rgba(0,0,0,0.6); display:none; align-items:center; justify-content:center; z-index:9999;
  }
  .modal{
    width:min(520px,92vw); background:linear-gradient(180deg,#07172a,#0b2546); border-radius:12px; padding:20px; border:1px solid rgba(255,255,255,0.06);
    box-shadow:0 30px 80px rgba(0,0,0,0.7); color:var(--text);
  }
  .modal h2{margin-bottom:8px;color:#bfe6ff;font-size:1.05rem}
  .modal p{margin-bottom:16px;color:rgba(255,255,255,0.9)}
  .modal .actions{display:flex;gap:8px;justify-content:flex-end}
  .btn-close{padding:8px 12px;border-radius:8px;border:none;background:linear-gradient(90deg,#ff9a76,#ff6b6b);color:#001;font-weight:700;cursor:pointer}
  .btn-ok{padding:8px 12px;border-radius:8px;border:none;background:linear-gradient(90deg,#00c6ff,#0072ff);color:#001;font-weight:700;cursor:pointer}

  @media (prefers-reduced-motion: reduce){
    .morse{transition:none}
  }
</style>
</head>
<body>
  <div class="card" role="main" aria-labelledby="title">
    <h1 id="title">Bienvenue</h1>

    <!-- Morse mis en évidence et cliquable -->
    <p class="lead">
      <span id="morseText" class="morse" tabindex="0" role="button" aria-pressed="false" aria-label="Texte en morse cliquable">
        .- -. - .-. . / - --- -. / .--. ..- ... . -.. --- / .--. --- ..- .-. / -.-. --- -. - .. -. ..- . .-. .-.-.- / ... .. / - ..- / - .- .--. . ... / ..- -. / -- --- - / ... .--. . -.-. .. .- .-.. --..-- / ..- -. / . .- ... - . .-. -....- . --. --. / ... . / -.. . -.-. .-.. . -. -.-. .... . .-. .-
      </span>
    </p>

    <form id="pseudoForm" aria-label="Formulaire pseudo">
      <input id="pseudoInput" type="text" placeholder="Ton pseudo..." autocomplete="off" aria-label="Pseudo" />
      <button id="submitBtn" type="submit">Valider</button>
      <button id="skipBtn" type="button" class="secondary">Passer</button>
    </form>

    <div id="message" class="msg" role="status" aria-live="polite" style="display:none"></div>
    <div class="hint">Astuce : essaye différents pseudos pour voir si quelque chose se passe.</div>

    <div id="fallback" class="fallback" style="display:none">
      Si la redirection locale est bloquée, ouvre manuellement : <a id="fallbackLink" class="fallback-link" href="#" target="_blank" rel="noopener">ouvrir le fichier local</a>
    </div>
  </div>

  <!-- Modal popup -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <h2 id="modalTitle">Petit message</h2>
      <p id="modalText">je sais c harr mais va dmd a chatgpt</p>
      <div class="actions">
        <button id="modalClose" class="btn-close" type="button">Fermer</button>
        <button id="modalOk" class="btn-ok" type="button">Ok</button>
      </div>
    </div>
  </div>

<script>
  // Rappels des chemins locaux (inchangés)
  const bertrandLocal = 'C:/Users/fatih/Desktop/htmldiscord/bertrand';
  const turkoLocal = 'file:///C:/Users/fatih/Desktop/htmldiscord/siteweb.html';

  // Éléments
  const form = document.getElementById('pseudoForm');
  const input = document.getElementById('pseudoInput');
  const msg = document.getElementById('message');
  const fallback = document.getElementById('fallback');
  const fallbackLink = document.getElementById('fallbackLink');
  const skipBtn = document.getElementById('skipBtn');

  const morseText = document.getElementById('morseText');
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalClose = document.getElementById('modalClose');
  const modalOk = document.getElementById('modalOk');

  function normalize(text){ return String(text || '').trim().toLowerCase(); }
  function showMessage(text, color){ msg.style.display='block'; msg.textContent=text; msg.style.color = color || '#ffd27a'; }

  // Afficher modal
  function openModal(){
    modalBackdrop.style.display = 'flex';
    modalBackdrop.setAttribute('aria-hidden','false');
    // focus sur le bouton OK pour accessibilité
    modalOk.focus();
  }

  // Fermer modal
  function closeModal(){
    modalBackdrop.style.display = 'none';
    modalBackdrop.setAttribute('aria-hidden','true');
    // remettre le focus sur le texte morse
    morseText.focus();
  }

  // Click sur le texte morse ouvre le popup
  morseText.addEventListener('click', () => {
    openModal();
  });

  // Permet ouverture via clavier (Entrée ou Espace)
  morseText.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' || e.key === ' '){
      e.preventDefault();
      openModal();
    }
  });

  // Fermeture du modal
  modalClose.addEventListener('click', closeModal);
  modalOk.addEventListener('click', closeModal);

  // Fermer en cliquant en dehors de la boîte
  modalBackdrop.addEventListener('click', (e) => {
    if(e.target === modalBackdrop) closeModal();
  });

  // Fermer avec Échap
  document.addEventListener('keydown', (e) => {
    if(e.key === 'Escape' && modalBackdrop.style.display === 'flex') closeModal();
  });

  // Formulaire et redirections (même logique que précédemment)
  function tryLocalRedirect(url){
    showMessage('Easter‑egg détecté — tentative d’ouverture du fichier local...', '#bfe6ff');
    try {
      window.location.assign(url);
    } catch (err) {
      showMessage('Impossible d’ouvrir directement le fichier local.', '#ffd27a');
      fallback.style.display = 'block';
      fallbackLink.href = url;
      fallbackLink.textContent = url;
      return;
    }
    setTimeout(() => {
      showMessage('La redirection locale a peut‑être été bloquée par le navigateur.', '#ffd27a');
      fallback.style.display = 'block';
      fallbackLink.href = url;
      fallbackLink.textContent = url;
    }, 900);
  }

  function normalFlow(){
    showMessage('Pseudo accepté — préparation en cours...', '#bfe6ff');
    let count = 4;
    const interval = setInterval(() => {
      showMessage('Lancement dans ' + count + '...', '#bfe6ff');
      count--;
      if(count < 0){
        clearInterval(interval);
        showMessage('Redirection...', '#bfe6ff');
        try { window.location.assign(turkoLocal); } catch (err) { window.location.href = 'sitweb.html'; }
      }
    }, 600);
  }

  form.addEventListener('submit', (e) => {
    e.preventDefault();
    const pseudo = normalize(input.value);
    if(!pseudo){ showMessage('Entre un pseudo pour continuer.', '#ffd27a'); return; }
    if(pseudo === 'bertrand'){ tryLocalRedirect(bertrandLocal); return; }
    if(pseudo === 'turko'){ tryLocalRedirect(turkoLocal); return; }
    normalFlow();
  });

  skipBtn.addEventListener('click', () => {
    showMessage('Redirection directe...', '#bfe6ff');
    setTimeout(() => { try { window.location.assign(turkoLocal); } catch (err) { window.location.href = 'sitweb.html'; } }, 300);
  });

  // Focus initial
  window.addEventListener('load', () => input.focus());
</script>
</body>
</html>
